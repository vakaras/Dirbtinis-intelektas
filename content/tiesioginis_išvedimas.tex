\chapter{Tiesioginis išvedimas}

\section{Užduotis}

Parašyti programą, kuri, kaip pradinius duomenis gavusi trejetą
$<R, F, G>$, panaudodama tiesioginio išvedimo sistemą nustatytų
ar tikslas $G$ yra išvedamas ir jei taip, tai kokias produkcijas
turime pritaikyti, kad jį gautume.

\section{Pseudo kodas}

\label{sec:fc:pseudo}

Pradiniai duomenys:
\begin{description}
  \item[$R$] – taisyklių aibė.
  \item[$F$] – pradinių faktų aibė.
  \item[$G$] – ieškomas tikslas.
\end{description}

Rezultatas:
\begin{description}
  \item[$Q$] – panaudotų taisyklių seka.
\end{description}

\begin{algorithmic}[1]
  \Function{tiesioginis išvedimas}{$R, F, G$}
    \State $Q := \left(  \right)$
    \State $r :=$ pirma iš taisyklių;
    \While{yra pritaikomų taisyklių $\land G \not\in F$}
                                        \label{fc:pseudo:while_condition}
      \If{$r$ prielaidos yra tarp $F \land r$ išvados nėra tarp $F$}
                                        \label{fc:pseudo:if_condition}
        \State $r$ išvadą pridedame į $F$;
                                        \label{fc:pseudo:add_fact}
        \State $r := $ pirma iš taisyklių;
                                        \label{fc:pseudo:start}
        \State $r$ pridedame į $Q$ galą;
                                        \label{fc:pseudo:add_rule}
      \Else
        \State $r := $ kita taisyklė;   \label{fc:pseudo:next_rule}
      \EndIf
    \EndWhile
    \State \Return Q;
  \EndFunction
\end{algorithmic}

\section{Realizacija}

Tiesioginio išvedimo algoritmas, pateiktas \ref{sec:fc:pseudo}
skyrelyje, siekiant išvengti netinkamo programavimo stiliaus Python
kalba, buvo realizuotas \emph{while} ir \emph{kita taisyklė}
konstrukcijas pakeičiant į rekursiją bei iteratorių:

\pythonai{source}{forwardchaining.ForwardChaining.recursion}

\section{Pavyzdžiai}

\subsection{Pirmasis pavyzdys: paprastas atvejis}

\begin{pythonaienv}[fc]
# Taisyklės:
FB Z                                    # R1: F, B → Z
CD F                                    # R2: C, D → F
A D                                     # R3: A → D
# Faktai:
ABC
# Tikslas:
Z
\end{pythonaienv}

\subsection{Antrasis pavyzdys: du išvedimo keliai}

\begin{pythonaienv}[fc]
# Taisyklės:
D Z                                     # R1: D → Z
C D                                     # R2: C → D
B C                                     # R3: B → C
A G                                     # R4: A → G
G Z                                     # R5: G → Z
A B                                     # R6: A → B
# Faktai:
A
# Tikslas:
Z
\end{pythonaienv}

\subsection{Trečiasis pavyzdys: du išvedimo keliai (taisyklės kita tvarka)}

\begin{pythonaienv}[fc]
# Taisyklės:
A G                                     # R1: A → G
D Z                                     # R2: D → Z
C D                                     # R3: C → D
B C                                     # R4: B → C
A B                                     # R5: A → B
G Z                                     # R6: G → Z
# Faktai:
A
# Tikslas:
Z
\end{pythonaienv}

\subsection{Ketvirtasis pavyzdys: didesnis testas}

\begin{pythonaienv}[fc]
# Taisyklės:
FB Z                                    # R1: F, B → Z
CD F                                    # R2: C, D → F
A D                                     # R3: A → D
A L                                     # R4: A → L
L K                                     # R5: L → K
B A                                     # R6: B → A
D M                                     # R7: D → M
# Faktai:
ABC
# Tikslas:
Z
\end{pythonaienv}

\subsection{Penktasis pavyzdys: ilgas antecedentas}

\begin{pythonaienv}[fc]
# Taisyklės:
G Z                                     # R1: G → Z
A G                                     # R2: A → G
A B                                     # R3: A → B
B C                                     # R4: B → C
C D                                     # R5: C → D
D Z                                     # R6: D → Z
ABGCDZ H                                # R7: A, B, C, D, G, Z → H
# Faktai:
A
# Tikslas:
H
\end{pythonaienv}

\subsection{Šeštasis pavyzdys: išvedimas neegzistuoja}

\begin{pythonaienv}[fc]
# Taisyklės:
CD F                                    # R1: C, D → F
A D                                     # R2: A → D
A L                                     # R3: A → L
L K                                     # R4: L → K
B A                                     # R5: B → A
D M                                     # R6: D → M
FB Z                                    # R7: F, B → Z
# Faktai:
ABC
# Tikslas:
H
\end{pythonaienv}

\subsection{Septintasis pavyzdys: tikslas tarp prielaidų}

\begin{pythonaienv}[fc]
# Taisyklės:
CD F                                    # R1: C, D → F
A D                                     # R2: A → D
A L                                     # R3: A → L
L K                                     # R4: L → K
B A                                     # R5: B → A
D M                                     # R6: D → M
FB Z                                    # R7: F, B → Z
# Faktai:
ABC
# Tikslas:
B
\end{pythonaienv}

\subsection{Aštuntasis pavyzdys: devynių produkcijų DC}

\begin{pythonaienv}[fc]
# Taisyklės:
DC Z
C D
B C
A B
D A
T D
G A
H B
J C
# Faktai:
T
# Tikslas:
Z
\end{pythonaienv}

\subsection{Devintasis pavyzdys: devynių produkcijų CD}

\begin{pythonaienv}[fc]
# Taisyklės:
CD Z
C D
B C
A B
D A
T D
G A
H B
J C
# Faktai:
T
# Tikslas:
Z
\end{pythonaienv}

\subsection{Dešimtasis pavyzdys: labirintas}

\begin{pythonaienv}[fc]
# Taisyklės:
tŠ             # R1: t → Š
yŠ             # R2: y → Š
sd             # R3: s → d
ds             # R4: d → s
sa             # R5: s → a
as             # R6: a → s
sb             # R7: s → b
bs             # R8: b → s
sc             # R9: s → c
cs             # R10: c → s
dv             # R11: d → v
vd             # R12: v → d
vy             # R13: v → y
yv             # R14: y → v
vw             # R15: v → w
wv             # R16: w → v
vx             # R17: v → x
xv             # R18: x → v
zw             # R19: z → w
wz             # R20: w → z
zt             # R21: z → t
tz             # R22: t → z
ae             # R23: a → e
ea             # R24: e → a
ef             # R25: e → f
fe             # R26: f → e
fg             # R27: f → g
gf             # R28: g → f
gh             # R29: g → h
hg             # R30: h → g
hi             # R31: h → i
ih             # R32: i → h
hj             # R33: h → j
jh             # R34: j → h
ik             # R35: i → k
ki             # R36: k → i
kl             # R37: k → l
lk             # R38: l → k
lm             # R39: l → m
ml             # R40: m → l
mo             # R41: m → o
om             # R42: o → m
mn             # R43: m → n
nm             # R44: n → m
oq             # R45: o → q
qo             # R46: q → o
qr             # R47: q → r
rq             # R48: r → q
qj             # R49: q → j
jq             # R50: j → q
rb             # R51: r → b
br             # R52: b → r
np             # R53: n → p
pn             # R54: p → n
cu             # R55: c → u
uc             # R56: u → c
# Faktai:
s
# Tikslas:
Š
\end{pythonaienv}
